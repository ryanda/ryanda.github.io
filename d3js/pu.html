<body>
<script src="d3.v3.min.js" charset="utf-8"></script>
<style type="text/css">
.arc {
    fill: blue;
}
body {
    background-color: #f0f0f0;
}
</style>
<script type="text/javascript">

// data
var w = 800,
    h = 800,
    r = Math.min(w, h) / 2,
    radiusArc = 200,
    color = d3.scale.category20(),
    labelr = r + 30,
    arcDataInner = (2 * Math.PI)*41/100,
    arcDataDash = (2 * Math.PI)*65/100,
    arcDataOutter = (2 * Math.PI)*77/100;

var dataSet = [
        {"label":"One", "value":60}, 
        {"label":"Two", "value":5}, 
        {"label":"Three", "value":15}, 
        {"label":"Four", "value":15}
    ];

// append chart canvas
var svg = d3.select("body")
    .append("svg")
    .data([dataSet])
    .attr("width", w)
    .attr("height", h)
    .append("g")
    .attr("transform", "translate(" + w / 2 + "," + h / 2 + ")");

// add chart pie group
var arcin = d3.svg.arc()
    .endAngle(arcDataInner)
    .outerRadius(radiusArc - 10);
var pie = d3.layout.pie()
    .endAngle(arcDataInner)
    .value(function(d) { return d.value; })
    .sort(null);
var arcs = svg.selectAll("g.slice")
    .data(pie)
    .enter()
    .append("g")
    .attr("class", "slice");
arcs.append("path")
    .attr("fill", function(d, i) { return color(i); })
    .attr("d", arcin);
    // .on('mouseover', function(d, i) { // mouse hover test
    //     console.log('hover!');
    // });

// append text
// arcs.append("text")
//     .attr("transform", function(d) {
//         d.outerRadius = radiusArc;
//         d.innerRadius = radiusArc +20;
//         var c = arcin.centroid(d),
//             x = c[0],
//             y = c[1],
//             h = Math.sqrt(x*x + y*y);
//         pos1 = (x/h * 180);
//         pos2 = (y/h * 180);
//         return "translate(" + pos1 +  ',' + pos2 +  ")";
//     })
//     .attr("text-anchor", "middle")
//     .text(function(d, i) { return dataSet[i].label; });

// additional text
// arcs.filter(function(d) { return d.endAngle - d.startAngle > .2; }).append("svg:text")
//     .attr("dy", ".35em")
//     .attr("text-anchor", "middle")
//     // .attr("transform", function(d) { return "translate(" + arcin.centroid(d) + ")rotate(" + angle(d) + ")"; })
//     .attr("transform", function(d) {
//         d.outerRadius = radiusArc;
//         d.innerRadius = radiusArc/2;
//         return "translate(" + arcin.centroid(d) + ")rotate(" + angle(d) + ")";
//     })
//     .style("fill", "White")
//     .style("font", "bold 12px Arial")
//     .text(function(d) { return d.data.value; });
// function angle(d) { 
//     var a = (d.startAngle + d.endAngle) * 90 / Math.PI - 90;
//     return a > 90 ? a - 180 : a;
// }

// arc fill
var arcfill = d3.svg.arc()
    .innerRadius(radiusArc)
    .outerRadius(radiusArc + 10)
    .startAngle(0)
    .endAngle(arcDataInner);
svg.append("path")
    .attr("class", "arc")
    .attr("d", arcfill)
    .style("stroke", "green")
    .style('stroke-width', 2)
    .style("fill", "blue");

// arc dash
var arcdash = d3.svg.arc()
    .innerRadius(radiusArc)
    .outerRadius(radiusArc + 10)
    .startAngle(arcDataInner)
    .endAngle(arcDataDash);
svg.append("path")
    .attr("class", "arc")
    .attr("d", arcdash)
    .style("stroke-dasharray", ("10, 10"))
    .style('stroke-width', 2)
    .style("stroke", "blue")
    .style("fill", "none");

// arc back
var arcback = d3.svg.arc()
    .innerRadius(radiusArc)
    .outerRadius(radiusArc + 10)
    .startAngle(arcDataDash)
    .endAngle(2 * Math.PI);
svg.append("path")
    .attr("class", "arc")
    .attr("d", arcback)
    .style("stroke-dasharray", ("10, 5"))
    .style('stroke-width', 2)
    .style("stroke", "grey")
    .style("fill", "none");

// arc out
var arcout = d3.svg.arc()
    .innerRadius(radiusArc + 20)
    .outerRadius(radiusArc + 30)
    .startAngle(0)
    .endAngle(arcDataOutter);
svg.append("path")
    .attr("class", "arc")
    .attr("d", arcout)
    .style("stroke", "black")
    .style("opacity", 0.5)
    .style("fill", "white");
</script>
</body>